{% extends 'core/base.html'  %}
{% load humanize %}
{% block content %}
<div class="container">
    <div class="columns">
      <div class="column is-12">
          <span><a href="{% url 'groupconversation' obj.id %}">Go back</a></span>
          <h1 class="title">Group Members List </h1>
                    {% if messages %}
<ul class="messages">
    {% for message in messages %}

    {% if message.tags == 'warning' %}
    <div  class= "notification is-danger" id="msg">
   {{ message }}
    </div>
     {% else %}
    <div  class="notification is-success" id="msg">
     {{ message }}
    </div>
   {% endif %}
    {% endfor %}
</ul>
{% endif %}


          <div class="conversations-list">
              {% for members in groupconversationmembers %}
               {% if members.users == members.groupconversation.created_by %}
                        <p> Admin is  {{ members.groupconversation.created_by }} </p>
                    {% endif %}
              <br>
              <article class="media">
  <figure class="media-left">
    <p class="image is-64x64">
      {% if members.users.studysocioprofile.avatar %}
      <img style=" vertical-align: middle;
  border-radius: 50%; height:65px;width:90px;" src="{{ members.users.studysocioprofile.avatar.url }}">
        {% endif %}
    </p>
  </figure>
  <div class="media-content">
    <div class="content">


                    <p>{{ members.users.username }} - {{ members.added_at|naturaltime }}</p>
    </div>

  </div>
  <div class="media-right">
       {% if members.users == request.user.studysocioprofile.user %}
        <form action="listofgroupmembers/{{members.get_hashid}}/remove/" method="post">

       {% csrf_token %}
         <button type="submit" class="button is-danger is-rounded is-small" >leave</button>
        </form>
      {% elif members.groupconversation.created_by == request.user.studysocioprofile.user %}
        <form action="listofgroupmembers/{{members.get_hashid}}/remove/" method="post">

       {% csrf_token %}
         <button type="submit" class="button is-danger is-rounded is-small" >remove</button>
        </form>
       {% endif %}
  </div>
</article>
              <br>
                <div class="conversations-list-item">




              {% empty %}
                    <p>No conversations!</p>
                </div>
              {% endfor %}
          </div>

      </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script>
    setTimeout(function(){
        if ($('#msg').length > 0) {
            $('#msg').remove();
        }
    }, 3000)    // 3000 millisecond
</script>
{% endblock %}